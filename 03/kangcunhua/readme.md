#目录
[TOC]
#作业

对IDC表进行CRUD
##删除某条记录的建议：
给每张表加一个字段
|status|desc|
|0|已删除|
|1|正常（默认）|

##需求清单：
+ 点击删除按键
+ ajax
+ 删除成功
+ 从页面删除这条记录
    - 刷新
    - 通过JS，将这条记录从页面删除



##测试：
+ 启动vagrant
    - sublime 左栏Lesson03目录，右键“Open Glue Terminal”
    - vagrant up default
    - 注：因为是听到第五次课时，回头补上的第三次作业，所以vagrant虚拟机多了几个，此时启动要加上指定vm，此处是default
    - 同理，关闭vm也是 vagrant halt default
+ 启动MySQL
    - ssh 127.0.0.1 2222
    - sudo /etc/init.d/mysqld start
+ 启动webserver
    - ssh 127.0.0.1 2222
    - cd /vagrant
    - python manage.py runserver -h 0.0.0.0 -p 8000
+ 打印日志
    - 复制ssh隧道
    - cd /vagrant 
    - tail -f flask.log

##进度
+ 首页： http://127.0.0.1:8000/dashboard/
+ IT资产-->IDC信息：  http://127.0.0.1:8000/resources/idc/ 
    - 列表，添加、修改、删除

##其他开发日志：
+ 重构class LazyImport(object)：
    - 新增三个函数，以兼容同一台机子调用API时，可以略过Json验证，直接进入进行模块调用(/app/utils/__init__.py)；
    - def isValidModule(self):
    - def isValidMethod(self):
    - def getCallMethod(self):
+ 重构class JsonRpc
    - 调用LazyImport的新增函数，精简
    - def validata_HasModule(self)
    - def validata_hasFunction(self)

##需要注意的地方
+ /app/main 目录存放路由文件
+ /app/main/__init__.py 注册蓝图
+ 新增路由文件如运行报404，多是没有在__init__.py中注册


##输出
###webserver端输出
```shell
(python27env) [vagrant@reboot-devops-02 vagrant]$ python manage.py runserver -h 0.0.0.0 -p 8000
 * Running on http://0.0.0.0:8000/ (Press CTRL+C to quit)
 * Restarting with stat
 * Debugger is active!
 * Debugger pin code: 261-451-868
10.0.2.2 - - [12/Jun/2016 19:58:19] "GET /dashboard/ HTTP/1.1" 200 -
10.0.2.2 - - [12/Jun/2016 19:58:19] "GET /static/css/bootstrap.min.css HTTP/1.1" 304 -
10.0.2.2 - - [12/Jun/2016 19:58:19] "GET /static/css/public.css HTTP/1.1" 304 -
10.0.2.2 - - [12/Jun/2016 19:58:19] "GET /static/jquery-ui-1.11.4/jquery-ui.css HTTP/1.1" 304 -
10.0.2.2 - - [12/Jun/2016 19:58:19] "GET /static/js/jquery-1.9.1.min.js HTTP/1.1" 304 -
10.0.2.2 - - [12/Jun/2016 19:58:19] "GET /static/js/bootstrap.min.js HTTP/1.1" 304 -
10.0.2.2 - - [12/Jun/2016 19:58:19] "GET /static/images/logo.jpg HTTP/1.1" 304 -
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:272]:
初始化：LazyImport类！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:320]:
验证模块idc是否存在;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:330]:
当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:345]:
验证模块idc是否有此函数get;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:348]:
当前模块idc查找函数get成功;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:361]:
获取可执行的函数
--------------------------------------------------------------------------------
参数：{u'where': {u'status': 1}}
output:[]
--------------------------------------------------------------------------------
DEBUG in idc [/vagrant/modules/idc.py:96]:
查询参数为 {u'where': {u'status': 1}}的数据成功
--------------------------------------------------------------------------------
10.0.2.2 - - [12/Jun/2016 19:58:32] "GET /resources/idc/ HTTP/1.1" 200 -
10.0.2.2 - - [12/Jun/2016 19:59:32] "GET /resources/idc/add/ HTTP/1.1" 200 -
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:272]:
初始化：LazyImport类！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:320]:
验证模块idc是否存在;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:330]:
当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:345]:
验证模块idc是否有此函数create;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:348]:
当前模块idc查找函数create成功;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:361]:
获取可执行的函数
--------------------------------------------------------------------------------
{'user_interface': u'kch', 'name': u'yj', 'user_phone': u'13811111111', 'idc_name': u'\u71d5\u90ca\u673a\u623f', 'rel_cabinet_num': u'50', 'phone': u'010-88889999', 'address': u'\u71d5\u987a\u8def\u4e2d\u5174\u56ed\u533a', 'pact_cabinet_num': u'80', 'email': u'tt@51reboot.com'}
--------------------------------------------------------------------------------
DEBUG in idc [/vagrant/modules/idc.py:34]:
新增参数为 {'user_interface': u'kch', 'name': u'yj', 'user_phone': u'13811111111', 'idc_name': u'\u71d5\u90ca\u673a\u623f', 'rel_cabinet_num': u'50', 'phone': u'010-88889999', 'address': u'\u71d5\u987a\u8def\u4e2d\u5174\u56ed\u533a', 'pact_cabinet_num': u'80', 'email': u'tt@51reboot.com'}的数据成功
--------------------------------------------------------------------------------
10.0.2.2 - - [12/Jun/2016 20:00:38] "POST /resources/idc/doadd/ HTTP/1.1" 200 -
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:272]:
初始化：LazyImport类！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:320]:
验证模块idc是否存在;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:330]:
当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:345]:
验证模块idc是否有此函数get;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:348]:
当前模块idc查找函数get成功;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:361]:
获取可执行的函数
--------------------------------------------------------------------------------
参数：{u'where': {u'status': 1}}
output:[]
--------------------------------------------------------------------------------
DEBUG in idc [/vagrant/modules/idc.py:96]:
查询参数为 {u'where': {u'status': 1}}的数据成功
--------------------------------------------------------------------------------
10.0.2.2 - - [12/Jun/2016 20:00:40] "GET /resources/idc/ HTTP/1.1" 200 -
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:272]:
初始化：LazyImport类！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:320]:
验证模块idc是否存在;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:330]:
当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:345]:
验证模块idc是否有此函数get;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:348]:
当前模块idc查找函数get成功;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:361]:
获取可执行的函数
--------------------------------------------------------------------------------
参数：{u'where': {u'id': 10}}
output:[]
--------------------------------------------------------------------------------
DEBUG in idc [/vagrant/modules/idc.py:96]:
查询参数为 {u'where': {u'id': 10}}的数据成功
--------------------------------------------------------------------------------
10.0.2.2 - - [12/Jun/2016 20:00:48] "GET /resources/idc/modify/10 HTTP/1.1" 200 -
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:272]:
初始化：LazyImport类！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:320]:
验证模块idc是否存在;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:330]:
当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:345]:
验证模块idc是否有此函数update;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:348]:
当前模块idc查找函数update成功;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:361]:
获取可执行的函数
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in idc [/vagrant/modules/idc.py:130]:
更新id为： 10的数据成功
--------------------------------------------------------------------------------
10.0.2.2 - - [12/Jun/2016 20:00:53] "POST /resources/idc/update HTTP/1.1" 200 -
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:272]:
初始化：LazyImport类！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:320]:
验证模块idc是否存在;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:330]:
当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:345]:
验证模块idc是否有此函数get;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:348]:
当前模块idc查找函数get成功;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:361]:
获取可执行的函数
--------------------------------------------------------------------------------
参数：{u'where': {u'status': 1}}
output:[]
--------------------------------------------------------------------------------
DEBUG in idc [/vagrant/modules/idc.py:96]:
查询参数为 {u'where': {u'status': 1}}的数据成功
--------------------------------------------------------------------------------
10.0.2.2 - - [12/Jun/2016 20:00:55] "GET /resources/idc/ HTTP/1.1" 200 -
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:272]:
初始化：LazyImport类！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:320]:
验证模块idc是否存在;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:330]:
当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:345]:
验证模块idc是否有此函数update;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:348]:
当前模块idc查找函数update成功;
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in __init__ [/vagrant/app/base/__init__.py:361]:
获取可执行的函数
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
DEBUG in idc [/vagrant/modules/idc.py:130]:
更新id为： 5的数据成功
--------------------------------------------------------------------------------
10.0.2.2 - - [12/Jun/2016 20:01:06] "POST /resources/idc/delete/ HTTP/1.1" 200 -

```
###日志输出
```shell
(python27env) [vagrant@reboot-devops-02 vagrant]$ tail -f flask.log 
2016-06-12 20:00:38,622 - app - __init__.py- DEBUG - 初始化：LazyImport类！
2016-06-12 20:00:38,623 - app - __init__.py- DEBUG - 验证模块idc是否存在;
2016-06-12 20:00:38,623 - app - __init__.py- DEBUG - 当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
2016-06-12 20:00:38,625 - app - __init__.py- DEBUG - 验证模块idc是否有此函数create;
2016-06-12 20:00:38,626 - app - __init__.py- DEBUG - 当前模块idc查找函数create成功;
2016-06-12 20:00:38,628 - app - __init__.py- DEBUG - 获取可执行的函数
2016-06-12 20:00:38,635 - app - idc.py- DEBUG - 新增参数为 {'user_interface': u'kch', 'name': u'yj', 'user_phone': u'13811111111', 'idc_name': u'\u71d5\u90ca\u673a\u623f', 'rel_cabinet_num': u'50', 'phone': u'010-88889999', 'address': u'\u71d5\u987a\u8def\u4e2d\u5174\u56ed\u533a', 'pact_cabinet_num': u'80', 'email': u'tt@51reboot.com'}的数据成功
2016-06-12 20:00:40,832 - app - __init__.py- DEBUG - 初始化：LazyImport类！
2016-06-12 20:00:40,833 - app - __init__.py- DEBUG - 验证模块idc是否存在;
2016-06-12 20:00:40,833 - app - __init__.py- DEBUG - 当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
2016-06-12 20:00:40,834 - app - __init__.py- DEBUG - 验证模块idc是否有此函数get;
2016-06-12 20:00:40,835 - app - __init__.py- DEBUG - 当前模块idc查找函数get成功;
2016-06-12 20:00:40,835 - app - __init__.py- DEBUG - 获取可执行的函数
2016-06-12 20:00:40,849 - app - idc.py- DEBUG - 查询参数为 {u'where': {u'status': 1}}的数据成功
2016-06-12 20:00:48,795 - app - __init__.py- DEBUG - 初始化：LazyImport类！
2016-06-12 20:00:48,796 - app - __init__.py- DEBUG - 验证模块idc是否存在;
2016-06-12 20:00:48,797 - app - __init__.py- DEBUG - 当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
2016-06-12 20:00:48,797 - app - __init__.py- DEBUG - 验证模块idc是否有此函数get;
2016-06-12 20:00:48,798 - app - __init__.py- DEBUG - 当前模块idc查找函数get成功;
2016-06-12 20:00:48,799 - app - __init__.py- DEBUG - 获取可执行的函数
2016-06-12 20:00:48,808 - app - idc.py- DEBUG - 查询参数为 {u'where': {u'id': 10}}的数据成功
2016-06-12 20:00:53,842 - app - __init__.py- DEBUG - 初始化：LazyImport类！
2016-06-12 20:00:53,843 - app - __init__.py- DEBUG - 验证模块idc是否存在;
2016-06-12 20:00:53,844 - app - __init__.py- DEBUG - 当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
2016-06-12 20:00:53,844 - app - __init__.py- DEBUG - 验证模块idc是否有此函数update;
2016-06-12 20:00:53,845 - app - __init__.py- DEBUG - 当前模块idc查找函数update成功;
2016-06-12 20:00:53,847 - app - __init__.py- DEBUG - 获取可执行的函数
2016-06-12 20:00:53,855 - app - idc.py- DEBUG - 更新id为： 10的数据成功
2016-06-12 20:00:55,434 - app - __init__.py- DEBUG - 初始化：LazyImport类！
2016-06-12 20:00:55,434 - app - __init__.py- DEBUG - 验证模块idc是否存在;
2016-06-12 20:00:55,435 - app - __init__.py- DEBUG - 当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
2016-06-12 20:00:55,435 - app - __init__.py- DEBUG - 验证模块idc是否有此函数get;
2016-06-12 20:00:55,436 - app - __init__.py- DEBUG - 当前模块idc查找函数get成功;
2016-06-12 20:00:55,437 - app - __init__.py- DEBUG - 获取可执行的函数
2016-06-12 20:00:55,446 - app - idc.py- DEBUG - 查询参数为 {u'where': {u'status': 1}}的数据成功
2016-06-12 20:01:06,637 - app - __init__.py- DEBUG - 初始化：LazyImport类！
2016-06-12 20:01:06,637 - app - __init__.py- DEBUG - 验证模块idc是否存在;
2016-06-12 20:01:06,638 - app - __init__.py- DEBUG - 当前延迟加载的类为：<module 'modules.idc' from '/vagrant/modules/idc.pyc'>！
2016-06-12 20:01:06,638 - app - __init__.py- DEBUG - 验证模块idc是否有此函数update;
2016-06-12 20:01:06,639 - app - __init__.py- DEBUG - 当前模块idc查找函数update成功;
2016-06-12 20:01:06,641 - app - __init__.py- DEBUG - 获取可执行的函数
2016-06-12 20:01:06,646 - app - idc.py- DEBUG - 更新id为： 5的数据成功

```
###mysql输出
```sql
(python27env) [vagrant@reboot-devops-02 vagrant]$ mysql -uroot -proot1234
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 37
Server version: 5.1.73 Source distribution

Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use reboot;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+------------------+
| Tables_in_reboot |
+------------------+
| alembic_version  |
| idc              |
+------------------+
2 rows in set (0.00 sec)

mysql> select * from idc;
+----+-------+--------------------+-----------------------+--------------+------------------+----------------+-------------+-----------------+------------------+--------+
| id | name  | idc_name           | address               | phone        | email            | user_interface | user_phone  | rel_cabinet_num | pact_cabinet_num | status |
+----+-------+--------------------+-----------------------+--------------+------------------+----------------+-------------+-----------------+------------------+--------+
|  1 | yz    | 北京亦庄机房       | 北京亦庄开发区        | 010-88886666 | mdr@51reboot.com | mdr            | 18888888888 |              50 |               40 |      0 |
|  3 | kang1 | 北京亦庄机房       | 北京亦庄开发区        | 010-88886666 | mdr@51reboot.com | mdr            | 18888888888 |              50 |               60 |      0 |
|  5 | yz8   | 北京亦庄机房       | 北京亦庄开发区        | 010-88886666 | mdr@51reboot.com | mdr            | 18888888888 |              50 |               55 |      0 |
+----+-------+--------------------+-----------------------+--------------+------------------+----------------+-------------+-----------------+------------------+--------+
3 rows in set (0.00 sec)

mysql> update idc set status = 1;
Query OK, 3 rows affected (0.00 sec)
Rows matched: 3  Changed: 3  Warnings: 0

mysql> update idc set status = 1;
Query OK, 0 rows affected (0.00 sec)
Rows matched: 3  Changed: 0  Warnings: 0

mysql> select * from idc;
+----+-------+--------------------+-----------------------+--------------+------------------+----------------+-------------+-----------------+------------------+--------+
| id | name  | idc_name           | address               | phone        | email            | user_interface | user_phone  | rel_cabinet_num | pact_cabinet_num | status |
+----+-------+--------------------+-----------------------+--------------+------------------+----------------+-------------+-----------------+------------------+--------+
|  1 | yz    | 北京亦庄机房       | 北京亦庄开发区        | 010-88886666 | mdr@51reboot.com | mdr            | 18888888888 |              50 |               40 |      1 |
|  3 | kang1 | 北京亦庄机房       | 北京亦庄开发区        | 010-88886666 | mdr@51reboot.com | mdr            | 18888888888 |              50 |               60 |      1 |
|  5 | yz8   | 北京亦庄机房       | 北京亦庄开发区        | 010-88886666 | mdr@51reboot.com | mdr            | 18888888888 |              50 |               55 |      1 |
+----+-------+--------------------+-----------------------+--------------+------------------+----------------+-------------+-----------------+------------------+--------+
3 rows in set (0.00 sec)

mysql> select * from idc;
ERROR 2006 (HY000): MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    41
Current database: reboot

+----+-------+-----------------------+-----------------------------+--------------+-------------------+----------------+-------------+-----------------+------------------+--------+
| id | name  | idc_name              | address                     | phone        | email             | user_interface | user_phone  | rel_cabinet_num | pact_cabinet_num | status |
+----+-------+-----------------------+-----------------------------+--------------+-------------------+----------------+-------------+-----------------+------------------+--------+
|  1 | yz    | 北京亦庄机房          | 北京亦庄开发区              | 010-88886666 | mdr@51reboot.com  | mdr            | 18888888888 |              50 |               60 |      1 |
|  6 | bjz   | 北京站IDC             | 北京站北口                  | 010-88886666 | kkk@reboot.com    | 赵工           | 18866666666 |              10 |               30 |      1 |
|  3 | kang1 | 北京亦庄机房          | 北京亦庄开发区              | 010-88886666 | mdr@51reboot.com  | mdr            | 18888888888 |              50 |               60 |      1 |
|  5 | yz8   | 北京亦庄机房          | 北京亦庄开发区              | 010-88886666 | mdr@51reboot.com  | mdr            | 18888888888 |              50 |               55 |      1 |
|  7 | dxh   | 稻香湖数据中心        | 西北六环稻香湖基地          | 010-88882222 | rrr@reboot.com    | 李二           | 13811111111 |              30 |               20 |      1 |
|  8 | hr    | 怀柔机房              | 怀柔区**路**号              | 010-88888888 | test@51reboot.com | kch            | 13555555555 |              90 |              100 |      1 |
+----+-------+-----------------------+-----------------------------+--------------+-------------------+----------------+-------------+-----------------+------------------+--------+
6 rows in set (0.00 sec)

mysql> update idc set status = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 7  Changed: 1  Warnings: 0

mysql> select * from idc;
+----+-------+-----------------------+-----------------------------+--------------+-------------------+----------------+-------------+-----------------+------------------+--------+
| id | name  | idc_name              | address                     | phone        | email             | user_interface | user_phone  | rel_cabinet_num | pact_cabinet_num | status |
+----+-------+-----------------------+-----------------------------+--------------+-------------------+----------------+-------------+-----------------+------------------+--------+
|  1 | yz    | 北京亦庄机房          | 北京亦庄开发区              | 010-88886666 | mdr@51reboot.com  | mdr            | 18888888888 |              50 |               50 |      1 |
|  6 | bjz   | 北京站IDC             | 北京站北口                  | 010-88886666 | kkk@reboot.com    | 赵工           | 18866666666 |              10 |               30 |      1 |
|  3 | kang1 | 北京亦庄机房          | 北京亦庄开发区              | 010-88886666 | mdr@51reboot.com  | mdr            | 18888888888 |              50 |               60 |      1 |
|  5 | yz8   | 北京亦庄机房          | 北京亦庄开发区              | 010-88886666 | mdr@51reboot.com  | mdr            | 18888888888 |              50 |               55 |      1 |
|  7 | dxh   | 稻香湖数据中心        | 西北六环稻香湖基地          | 010-88882222 | rrr@reboot.com    | 李二           | 13811111111 |              30 |               20 |      1 |
|  8 | hr    | 怀柔机房              | 怀柔区**路**号              | 010-88888888 | test@51reboot.com | kch            | 13555555555 |              90 |              100 |      1 |
|  9 | yq    | 延庆机房              | 延庆区**路**号              | 010-88889999 | test@51reboot.com | kch            | 13588888888 |              90 |              100 |      1 |
+----+-------+-----------------------+-----------------------------+--------------+-------------------+----------------+-------------+-----------------+------------------+--------+
7 rows in set (0.00 sec)

mysql> update idc set status = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 8  Changed: 1  Warnings: 0

mysql> select * from idc;
+----+-------+-----------------------+-----------------------------+--------------+-------------------+----------------+-------------+-----------------+------------------+--------+
| id | name  | idc_name              | address                     | phone        | email             | user_interface | user_phone  | rel_cabinet_num | pact_cabinet_num | status |
+----+-------+-----------------------+-----------------------------+--------------+-------------------+----------------+-------------+-----------------+------------------+--------+
|  1 | yz    | 北京亦庄机房          | 北京亦庄开发区              | 010-88886666 | mdr@51reboot.com  | mdr            | 18888888888 |              50 |               50 |      1 |
|  6 | bjz   | 北京站IDC             | 北京站北口                  | 010-88886666 | kkk@reboot.com    | 赵工           | 18866666666 |              10 |               30 |      1 |
|  3 | kang1 | 北京亦庄机房          | 北京亦庄开发区              | 010-88886666 | mdr@51reboot.com  | mdr            | 18888888888 |              50 |               60 |      1 |
|  5 | yz8   | 北京亦庄机房          | 北京亦庄开发区              | 010-88886666 | mdr@51reboot.com  | mdr            | 18888888888 |              50 |               55 |      1 |
|  7 | dxh   | 稻香湖数据中心        | 西北六环稻香湖基地          | 010-88882222 | rrr@reboot.com    | 李二           | 13811111111 |              30 |               20 |      1 |
|  8 | hr    | 怀柔机房              | 怀柔区**路**号              | 010-88888888 | test@51reboot.com | kch            | 13555555555 |              90 |              100 |      1 |
|  9 | yq    | 延庆机房              | 延庆区**路**号              | 010-88889999 | test@51reboot.com | kch            | 13588888888 |              90 |              100 |      1 |
| 10 | yj    | 燕郊机房              | 燕顺路中兴园区              | 010-88889999 | tt@51reboot.com   | kch            | 13811111111 |              70 |               80 |      1 |
+----+-------+-----------------------+-----------------------------+--------------+-------------------+----------------+-------------+-----------------+------------------+--------+
8 rows in set (0.00 sec)

mysql> 

```

##笔记--设置自动启动
每次启动vm都得和启动数据库
在.bash_profile中加了两句

```shell
# start virtual python27 env 
source /data/python27env/bin/activate
# start mysql 
sudo /etc/init.d/mysqld start
```


##笔记--修正命令行mysql乱码
新增[client]元素

```shell
[client]
default-character-set=utf8
```
在[mysqld]指定utf8

```shell
[mysqld]
character-set-server=utf8
```
###修改之前

```shell
mysql> show variables like 'char%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | latin1                     |
| character_set_connection | latin1                     |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | latin1                     |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec)
```
###修改之后

```shell
mysql> show variables like 'char%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec)
```

#sublime autodocstring 快捷键和命令
```log
Usage:

Use cmd + alt + ' on OS X, or ctrl + alt + ' on Windows / Linux to update the function or class that proceeds the cursor.

Commands:
• AutoDocstring: Current: Create or update the docstring for the next declaration that preceeds the cursor
• AutoDocstring: All: Create or update docstrings for all declarations in a module
• AutoDocstring: Convert...: Convert the docstring of the the next declaration that preceeds the cursor to a specific style
• AutoDocstring: Convert All...: Convert all existing docstrings in a module to a specific style
```
